server.port=8080
# server.servlet.context-path=/api  # context path 제거 (프록시에서 처리)

# Spring Boot 애플리케이션 이름
spring.application.name=boss-server

# PostgreSQL 데이터베이스 설정 (환경 변수 또는 프로필별 설정 사용)
spring.datasource.driver-class-name=org.postgresql.Driver
# url, username, password는 프로필별 설정 또는 환경 변수로 설정

# HikariCP Connection Pool 설정 (Supabase pooler 호환)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.initialization-fail-timeout=30000
spring.datasource.hikari.validation-timeout=3000
spring.datasource.hikari.connection-test-query=SELECT 1
# leak-detection-threshold 제거 (프로덕션 성능 오버헤드)

# JPA/Hibernate 설정
# 개발 초기: create-drop (애플리케이션 종료 시 테이블 삭제, 시작 시 재생성)
# create: 기존 테이블 삭제 후 재생성
# update: 스키마 변경만 적용 (프로덕션)
spring.jpa.hibernate.ddl-auto=update
# show-sql과 format_sql은 프로필별로 설정 (application-dev.properties, application-prod.properties)
spring.jpa.properties.hibernate.dialect=${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.PostgreSQLDialect}
spring.jpa.properties.hibernate.hbm2ddl.auto=update
# Prepared statement 캐싱 비활성화 (Supabase pooler 호환)
spring.jpa.properties.hibernate.jdbc.batch_size=0
spring.jpa.properties.hibernate.order_inserts=false
spring.jpa.properties.hibernate.order_updates=false
# Prepared statement 서버 사이드 캐싱 비활성화 (Supabase connection pooler 호환)
spring.jpa.properties.hibernate.jdbc.use_server_prepared_statement=false

# 트랜잭션 격리 수준 설정 (동시성 제어)
# 1: READ_UNCOMMITTED, 2: READ_COMMITTED, 4: REPEATABLE_READ, 8: SERIALIZABLE
spring.jpa.properties.hibernate.connection.isolation=2

# Discord OAuth 설정 제거됨 (사용하지 않음)

# 캐싱 설정
spring.cache.type=simple
spring.cache.cache-names=todayBosses,raidRoom
spring.cache.caffeine.spec=maximumSize=100,expireAfterWrite=30s

# 로깅 설정은 프로필별로 설정 (application-dev.properties, application-prod.properties)

